#!/usr/bin/env python
# -*- coding: utf-8 -*- 
"""ph - command line for using ph to parse a phone number

Usage:
    ph PHONE [--country COUNTRY | --country-code COUNTRY_CODE] [-h]

Arguments:
    PHONE                                 Text containing a phone number
    -c --country COUNTRY                  Two character country abbreviation [default: US]
    -k --country-code COUNTRY_CODE        Country specific numberic int'l dialing code [default: 0]

Options:
    -h --help                            Help using ph

"""

import sys
import os
from docopt import docopt
import json

def main(args):
    from ph.ph import parse_phone
    from ph.ph import country_code_for_region
    code, country = args['--country-code'], args['--country']
    phone = parse_phone(args['PHONE'], int(code.strip()), country.upper().strip())
    json.dump(phone, sys.stdout, indent=2, sort_keys=True)

if __name__ == '__main__':
    main(docopt(__doc__))
